[toc]



# 概要设计说明书

概要设计说明书又可称系统设计说明书，这里所说的系统是指程序系统。编制的目的是说明对程序 系统的设计考虑，包括程序系统 的基本处。流程、程序系统的组织结构、模块划分、功能分配、接口设计。 运行设计、数据结构设计和出错处理设计等，为程序的详 细设计提供基础。编制概要设计说明书的内容 要求如下: 

## 11.1 引言 

### 11.1.1 编写目的

**目的**：让用户和软件开发者对软件的一些规定达成共识，防止有误会发生。



### 11.1.2 背景

**名称**：汕大论坛

**开发者**：周泳龙、傅振羽、洪泽凯、王戈源、林鑫龙、赵柏诚、赖志荣、陈东建、黄满盛、孙一峰

**用户**：需要进行学术与生活交流的师生

**实现该软件的计算中心或计算机网络**：个人电脑编程与第三方服务器和平台



### 11.1.3 定义 

暂无



### 11.1.4 参考资料

《阿里巴巴java开发手册》**[手册](https://yq.aliyun.com/attachment/download/?spm=a2c6h.12873639.0.0.357737bf79GYv3&id=5585)**



### 11.2 总体设计

### 11.2.1 需求规定

（说明对本系统的主要的输入输出项目、处理的功能性能要求，详细的说明可参见附录 C。 ）

列表方式：

![9.3.1图](C:\Users\kaixuan\AppData\Local\Temp\WeChat Files\133690785285822216.jpg)

### 11.2.2 运行环境

（简要地说明对本系统的运行环境(包括硬件环境和支持环境)的规定，详细说明参见附录 C。 ）

**设备**：安卓手机、苹果手机

**支持软件**：

IntelliJ IDEA

MySQL workbench

微信开发者工具

通信协议：http协议

软件环境

用到的操作系统：win10，CentOS

### 11.2.3 基本设计概念和处理流程 

（说明本系统的基本设计概念和处理流程，尽量使用图表的形式。 ）

用户流程：打开小程序后，首先是注册功能，如果已经注册了，就直接登录，登录时检测账号密码是否正确。登录成功之后，就可以使用发布文章，查看商家，消息管理，安全检查，个人信息管理和论坛交流等功能。

![学生流程](https://upload-images.jianshu.io/upload_images/12192297-20c377c760b03c69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

管理员流程：打开小程序后，首先是注册功能，如果已经注册了，就直接登录，登录时检测账号密码是否正确。登录成功之后，就可以使管理发布文章，消息管理，安全检查，个人信息管理和发布公告等功能。



### 11.2.4 结构 

（用一览表及框图的形式说明本系统的系统元素(各层模块、子程序、公用程序等)的划分，扼要说明每个系统元素的标识符和功能， 分层次地给出各元素之间的控制与被控制关系. ）

#### 系统层次图

##### 学生![学生](https://upload-images.jianshu.io/upload_images/12192297-e778f3a57231db19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

##### 老师

![老师](https://upload-images.jianshu.io/upload_images/12192297-6fea758831adef43.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

从上图可以看到，老师和学生都是分为登陆注册、发布项目、消息管理、安全检查、作业管理、个人信息管理几大模块，并且各个子模块还有自身的详细子模块。

### 11.2.5 功能需求与程序的关系 

（本条用一张如下的矩阵图说明各项功能需求的实现同各块程序的分配关系: ）

|                    | 增加 | 查找 | 修改 | 删除 |
| :----------------: | :--: | :--: | :--: | :--: |
|    用户登陆注册    |  √   |      |  √   |  √   |
|      发布文章      |  √   |  √   |  √   |  √   |
|      消息管理      |  √   |  √   |  √   |  √   |
|      安全检查      |  √   |  √   |  √   |      |
| 文章管理（管理员） |  √   |  √   |  √   |  √   |
|    个人信息管理    |  √   |  √   |  √   |  √   |
|  文章管理（用户）  |      |  √   |      |  √   |



### 11.2.6 人工处理过程 

人工审核文章是否符合规定及用户信息的真实性；

### 11.2.7 尚未解决的问题

后台界面的布局设计与后台接口还没落实到位；后台监控不够完善；

## 11.3 接口设计 

### 11.3.1 用户接口

向用户提供的接口如下

|           向用户提供接口           |      系统响应      |
| :--------------------------------: | :----------------: |
|            查看文章信息            |      文章列表      |
|        修改，删除，确认项目        |    返回成功标志    |
| 文章的发布、修改、删除、消息的回复 |    返回成功标志    |
|  查看文章信息、消息通知、互动消息  | 返回相应的列表内容 |
|           增删改紧急好友           |    返回成功标志    |
|              查看好友              |      返回信息      |
|            查看对方信息            |   返回可公开信息   |
|             朋友圈转发             |    返回成功标志    |
|          评论、回复、收藏          |    返回成功标志    |
|              搜索文章              |    返回文章信息    |
|      管理员修改文章、发布公告      |    返回成功标志    |
|            修改个人信息            |    返回成功标志    |
|        上传个人信用检测资料        |    返回成功标志    |
|              查看订单              |    返回列表信息    |

### 11.3.2 外部接口

（说明本系统同外界的所有接口的安排包括软件与硬件之间的接口、本系统与各支持软件之间的接 口关系。 ）

|              | 提供的接口 | 响应信息         |
| ------------ | ---------- | ---------------- |
| 系统软件接口 | 数据库接口 | 个人，项目等信息 |



### 11.3.3 内部接口

（说明本系统之内的各个系统元素之间的接口的安排。 ）

![内部接口](https://upload-images.jianshu.io/upload_images/12192297-5b94fcf3e0e35453.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 11.4 运行设计

### 11.4.1 运行模块组合

（说明对系统施加不同的外界运行控制时所引起的各种不同的运行模块组合，说明每种运行所历经的内部模块和支持软件。 ）

### 11.4.2 运行控制

（说明每一种外界的运行控制的方式方法和操作步骤。 ）

运行控制，是说明系统运行时，可能要执行某个事务或者实现某项功能，但是要完成这些任务有一定的控制条，系统中所要实现的功能以及他们的控制条件。

|   运行控制   |                           控制方法                           |
| :----------: | :----------------------------------------------------------: |
|   增加项目   | 用户通过账号密码登陆系统，填写项目相关信息。系统将数据保存到数据库项目表中 |
|   删除项目   | 用户通过账号密码登陆系统，查询某个项目，并点击删除按钮。系统将该数据从数据库表中删除 |
|   查询项目   |            用户通过账号密码登陆系统，项目列表查询            |
|   修改项目   | 用户通过账号密码登陆系统，查询某个项目，并点击修改，填写修改后的信息，系统将数据库表中该项信息修改 |
| 增加动态信息 | 用户通过账号密码登陆系统，填写动态相关信息。系统将数据保存到数据库表中 |
| 删除动态信息 | 用户通过账号密码登陆系统，查询动态信息，并点击删除按钮。系统将该数据从数据库表中删除 |
| 查询动态信息 |            用户通过账号密码登陆系统，查询动态信息            |
| 修改动态信息 | 用户通过账号密码登陆系统，查询某个动态，并点击修改，填写修改后的信息，系统将数据库表中该项信息修改 |
| 增加安全信息 | 用户通过账号密码登陆系统，填写安全检查的各项信息。系统将数据保存到数据库项目表中 |
| 修改安全信息 | 用户通过账号密码登陆系统，点击修改安全检查信息，填写修改后的信息，系统将数据库表中该项信息修改 |
| 查询安全信息 |            用户通过账号密码登陆系统，查询安全信息            |
| 发布作业信息 | 用户通过账号密码登陆系统，填写作业相关信息。系统将数据保存到数据库项目表中 |
| 修改作业信息 | 用户通过账号密码登陆系统，点击修改作业信息，填写修改后的信息，系统将数据库表中该项信息修改 |
| 删除作业信息 | 用户通过账号密码登陆系统，查询作业信息，并点击删除按钮。系统将该数据从数据库表中删除 |
| 查询作业信息 |            用户通过账号密码登陆系统，查询作业信息            |
| 修改个人信息 | 用户通过账号密码登陆系统，点击修改个人信息，填写修改后的信息，系统将数据库表中该项信息修改 |
| 查询个人信息 |            用户通过账号密码登陆系统，查询个人信息            |



### 11.4.3 运行时间

（说明每种运行模块组合将占用各种资源的时间。）

用户登陆系统时间 < 1s

查询信息响应时间 < 3s

修改信息响应时间 < 3s

删除信息响应时间 < 3s

增加信息响应时间 < 3s

## 11.5 系统数据结构设计 

### 11.5.1 逻辑结构设计要点 

（给出本系统内所使用的每个数据结构的名称、标识符以及它们之中每个数据项、记录、文卷和系的标识、定义、长度及它们之间的 层次的或表格的相互关系。 ）

根据系统的功能，对系统的**几个主要的部分设计了数据结构**。

如下。 

#### mango_attend表

|  字段名称  | 字段说明 | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :--------: | :------: | :------------: | :--------: | :----------: |
| attend_id  |  关联id  |      int       |     是     |      否      |
|  user_id   |  用户id  |      int       |     是     |      否      |
| message_id |  文章id  |      int       |     是     |      否      |

#### mango_category表

|    字段名称    | 字段说明 | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :------------: | :------: | :------------: | :--------: | :----------: |
|  category_id   |  分类id  |      int       |     是     |      否      |
| category_name  |  分类名  |  varchar(255)  |     是     |      否      |
| category_image | 分类图源 |  varchar(255)  |     否     |      是      |

#### mango_collect表

|  字段名称  | 字段说明 | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :--------: | :------: | :------------: | :--------: | :----------: |
| collect_id | 项目编号 |      int       |     是     |      否      |
|  user_id   |  用户id  |      int       |     是     |      否      |
| message_id |  文章id  |      int       |     是     |      否      |

#### mango_comment表

|      字段名称      |   字段说明   | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :----------------: | :----------: | :------------: | :--------: | :----------: |
|     comment_id     |  文章评论id  |      int       |     是     |      否      |
|      user_id       |    用户id    |      int       |     是     |      否      |
|     message_id     |    文章id    |      int       |     是     |      否      |
|   comment_detail   |   文章内容   |    longtext    |     否     |      否      |
| comment_creat_time | 文章创建时间 |    datetime    |     否     |      否      |

#### mango_comment_reply表

|     字段名称      |   字段说明   | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :---------------: | :----------: | :------------: | :--------: | :----------: |
| comment_reply_id  |  评论回复id  |      int       |     是     |      否      |
|    comment_id     |    评论id    |      int       |     是     |      否      |
|   reply_user_id   | 回复的用户id |      int       |     是     |      否      |
|  reply_user_name  | 回复的用户名 |  varchar(25)   |     否     |      否      |
|  receive_user_id  |  评论用户id  |      int       |     是     |      否      |
| receive_user_name |  评论用户名  |  varchar(25)   |     否     |      否      |
|   reply_detail    |   回复内容   |    longtext    |     否     |      否      |
|    reply_time     |   回复时间   |    datetime    |     否     |      否      |

#### mango_message表

|      字段名称      |   字段说明   | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :----------------: | :----------: | :------------: | :--------: | :----------: |
|     message_id     |    文章id    |      int       |     是     |      否      |
|      user_id       |    用户id    |      int       |     是     |      否      |
|    category_id     |    分类id    |      int       |     是     |      否      |
|     user_phone     | 用户联系方式 |  varchar(20)   |     否     |      否      |
|     user_major     |   用户专业   |  varchar(20)   |     否     |      否      |
|     user_level     |   用户年级   |  varchar(20)   |     否     |      否      |
|   message_detail   |   文章内容   |    longtext    |     否     |      否      |
|   message_share    |  文章分享量  |      int       |     否     |      否      |
|  message_comment   |  文章评论数  |      int       |     否     |      否      |
|   message_watch    |  文章访问量  |      int       |     否     |      否      |
| message_creat_time | 文章创建时间 |    datetime    |     否     |      否      |

#### mango_message_image表

|  字段名称  | 字段说明 | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :--------: | :------: | :------------: | :--------: | :----------: |
|  image_id  |  图源id  |      int       |     是     |      否      |
| message_id |  文章id  |      int       |     是     |      否      |
| image_url  |   图源   |  varchar(255)  |     否     |      否      |

#### mango_new_message表

|      字段名称      |    字段说明    | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :----------------: | :------------: | :------------: | :--------: | :----------: |
|  new_message_tiem  | 新消息收到时间 |    datetime    |     否     |      否      |
|   new_message_id   |    新消息id    |      int       |     是     |      否      |
|      user_id       |     用户id     |      int       |     是     |      否      |
|  new_message_type  |   新消息类型   |      int       |     否     |      否      |
|     message_id     |     文章id     |      int       |     是     |      否      |
| new_message_detail |   新消息内容   |  varchar(255)  |     否     |      否      |

#### mango_notice表

|   字段名称    | 字段说明 | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :-----------: | :------: | :------------: | :--------: | :----------: |
|   notice_id   |  公告id  |      int       |     是     |      否      |
| notice_detail | 公告内容 |    longtext    |     否     |      否      |

#### mango_shop表

|    字段名称     |   字段说明   | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :-------------: | :----------: | :------------: | :--------: | :----------: |
|     shop_id     |    商店id    |      int       |     是     |      否      |
|    shop_name    |    商店名    |  varchar(50)   |     否     |      否      |
|   shop_intro    |     介绍     |    longtext    |     否     |      否      |
|   shop_phone    | 商店联系方式 |  varchar(50)   |     否     |      否      |
|   shop_avatar   |   商店头像   |  varchar(50)   |     否     |      否      |
|  shop_latitude  |   商店坐标   |  varchar(50)   |     否     |      否      |
| shop_longitude  |   商店坐标   |  varchar(50)   |     否     |      否      |
| shop_creat_time |   创建时间   |    datetime    |     否     |      否      |

#### mango_shop_business表

|     字段名称      | 字段说明 | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :---------------: | :------: | :------------: | :--------: | :----------: |
|    business_id    |  服务id  |      int       |     是     |      否      |
|      shop_id      |  商店id  |      int       |     是     |      否      |
| shop_goods_image  | 商品图片 |  varchar(255)  |     否     |      否      |
| shop_goods_tittle |  商品名  |  varchar(255)  |     否     |      否      |
| shop_goods_price  | 商品价钱 | decimal(10, 2) |     否     |      否      |

#### mango_shop_image表

|    字段名称    |  字段说明  | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :------------: | :--------: | :------------: | :--------: | :----------: |
| shop_detail_id | 商店内容id |      int       |     是     |      否      |
|    shop_id     |   商店id   |      int       |     是     |      否      |
|  shop_images   |  商店图片  |  varchar(255)  |     否     |      否      |

#### mango_swiper表

|     字段名称     |  字段说明  | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :--------------: | :--------: | :------------: | :--------: | :----------: |
|    swiper_id     | 滚动图片id |      int       |     是     |      否      |
| swiper_image_url | 滚动图片源 |  varchar(255)  |     否     |      否      |

#### mango_user表

|    字段名称     |     字段说明     | 数据类型及长度 | 是否关键字 | 是否可以为空 |
| :-------------: | :--------------: | :------------: | :--------: | :----------: |
|     user_id     |      用户id      |      int       |     是     |      否      |
|   user_gender   |       性别       |      int       |     否     |      否      |
|   user_openid   | 微信信息绑定参数 |  varchar(255)  |     是     |      否      |
|   user_avatar   |       头像       |  varchar(255)  |     否     |      否      |
|  user_nickname  |       昵称       |  varchar(255)  |     否     |      否      |
|  user_is_admin  |       权限       |      int       |     否     |      否      |
|   user_allow    |     是否有效     |      int       |     否     |      否      |
| user_creat_time |     注册时间     |    datetime    |     否     |      否      |

### 11.5.2 物理结构设计要点 

（给出本系统内所使用的每个数据结构中的每个数据项的存储要求，访问方法、存取单位、存取的物理关系(索引、设备、存储区域)、 设计考虑和保密条件。 ）

本系统内所使用的每个数据结构中的给个数据项都存储在mysql中,通过sequelize框架进行连接访问。

### 11.5.3 数据结构与程序的关系

（说明各个数据结构与访问这些数据结构的形式: ） 

|      | 项目模块 | 消息模块 | 安全模块 | 个人信息模块 | 作业信息模块 |
| ---- | -------- | -------- | -------- | ------------ | ------------ |
| 用户 | √        | √        | √        | √            | √            |
| 消息 |          | √        |          | √            |              |
| 作业 | √        |          |          | √            | √            |
| 项目 | √        |          | √        | √            | √            |



## 11.6 系统出错处理设计 

### 11.6.1 出错信息 

（用一览表的方式说朗每种可能的出错或故障情况出现时，系统输出信息的形式、含意及处理方法。 ）

|  出错位置  |    出错原因    |   提示信息   |
| :--------: | :------------: | :----------: |
|  密码错误  |  输入密码错误  |   密码错误   |
| 账号不存在 |     没注册     |  用户不存在  |
|  任何一处  |    网络断了    |   网络中断   |
|  查询信息  |  查询条件错误  |   条件错误   |
|  添加信息  | 添加信息不完整 | 填写完整信息 |

这只是一部分，由于类型很多，这里就不一一列举

### 11.6.2 补救措施

（说明故障出现后可能采取的变通措施，包括:

a.后备技术说明准备采用的后备技术，当原始系统数据万一丢失时启用的副本的建立和启动的技术，例如周期性地把磁盘信息记录 到磁带上去就是对于磁盘媒体的一种后备技术; 

b.降效技术说明准备采用的后备技术，使用另一个效率稍低的系统或方法来求得所需结果的某些部分，例如一个自动系统的降效技 术可以是手工操作和数据的人工记录; 

c.恢复及再启动技术说明将使用的恢复再启动技术，使软件从故障点恢复执行或使软件从头开始重新运行的方法。 ）

故障原因：软件故障	硬件故障

处理方式：寻找开发人员 	维修人员

### 11.6 3 系统维护设计 

（说明为了系统维护的方便而在程序内部设计中作出的安排，包括在程序中专门安排用于系统的检查与维护的检测点和专用模块。 各 个程序之间的对应关系，可采用如下的矩阵图的形式; ）

软件维护主要包括两大部分：数据库维护，软件维护

数据库维护：由后台开发人员进行维护

软件维护：由于各个功能之间的独立性较高，所以当修改某个功能的时候只需要对该功能进行修改即可，其他功能一般不需要修改。