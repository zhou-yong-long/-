[TOC]

# 软件编码规范

## 前言：

  通过建立代码编写规范，形成小程序开发小组编码约定，提高程序的可靠性、可读性、可修改性、可维护性、一致性，保证程序代码的质量，继承软件开发成果，充分利用资源。提高程序的可继承性，使开发人员之间的工作成果可以共享。

**软件编码要遵循以下原则:**

1.遵循开发流程，在设计的指导下进行代码编写。
2.代码的编写以实现设计的功能和性能为目标，要求正确完成设计要求的功能，达到设计的性能。
3.程序具有良好的程序结构，提高程序的封装性好，减低程序的耦合程度。
4.程序可读性强，易于理解；方便调试和测试，可测试性好。
5.易于使用和维护；良好的修改性、扩充性；可重用性强/移植性好。
6.占用资源少，以低代价完成任务。
7.在不降低程序的可读性的情况下，尽量提高代码的执行效率。



## 一、  规范：以下对本规范作详细说明。

### 1：源程序的文件管理：

#### a)组织：

每个程序文件单元通常都应由 .java、.wxml和 .js 等文件组成，并将单元的公共声明部分放在 .jar 文件和.css文件中。划分单元主要是以类为依据，原则上每个较大的类都应为一个单独的单元，但在类较小且多个小类关系密切等情况下也可几个类共一个单元（建议仅对已经详细测试的较为通用的类采用）。

#### b)命名：

原程序文件命名采用有意义的格式。例如：对登陆服务来说三个文件的命名应该是这样，.java的是 LoginController.java  .wxml的是me.wxml .js的是me.js

#### c)文件结构：

每个程序文件由标题、内容和附加说明三部分组成。

#####  	(A)标题：

​	文件最前面的注释说明，其内容主要包括：程序名，作者，版本信息，简要说明等，必要时应有更详尽的说明（将以此部分以空行隔开单独注释）。

#####  	(B)内容：

为文件源代码部分基本上按预处理语句、类型定义、变量定义、函数原型、函数实现（仅对 .java文件）的顺序。除构造器、GET\SET方法以外的函数应放在内容部分的最后，类的定义按 private 、 protected 、 pubilic 的顺序，各部分中按数据、函数、属性、事件的顺序。

##### 	 (C)附加说明：

文件末尾的补充说明，如参考资料等，若内容不多也可放在标题部分的最后。
举例说明：

------

类：MangoAttend
设计者：周泳龙(2020/12/15)
用途：用于与数据库mango_attend表进行交互

版本：
  1.0  2020/12/15   可用于实现基本的数据库交互操作

------



```java
public class MangoAttend {
    @ApiModelProperty
    @Id
    @Column(name = "`attend_id`")
    private Integer attendId;

    @ApiModelProperty
    @Column(name = "`user_id`")
    private Integer userId;

    @ApiModelProperty
    @Column(name = "`message_id`")
    private Integer messageId;

    /**
     * @return attend_id
     */
    public Integer getAttendId() {
        return attendId;
    }

    /**
     * @param attendId
     */
    public void setAttendId(Integer attendId) {
        this.attendId = attendId;
    }

    /**
     * @return user_id
     */
    public Integer getUserId() {
        return userId;
    }

    /**
     * @param userId
     */
    public void setUserId(Integer userId) {
        this.userId = userId;
    }

    /**
     * @return message_id
     */
    public Integer getMessageId() {
        return messageId;
    }

    /**
     * @param messageId
     */
    public void setMessageId(Integer messageId) {
        this.messageId = messageId;
    }
}
```

### 2．编辑风格：

### （1）缩进

缩进以4个空格为单位。建议在Tools/Editor Options中设置General页面的Block ident为4，Tab Stop为4，不要选中Use tab character。预处理语句、全局数据、函数原型、标题、附加说明、函数说明、标号等均顶格书写。语句块的“{”“}”配对对齐，并与其前一行对齐，语句块类的语句缩进建议每个“{”“}”单独占一行。

### （2）空格

变量、类、常量数据和函数在其类型，修饰符之间适当空格并据情况对齐。关键字原则上空一格，如： if ( ... ) 等，运算符的空格规定如下：“::”、“->”、“[”、“]”、“++”、“--”、“~”、“!”、“+”、“-”（指正负号），“.”（引用）等几个运算符两边不加空格（其中单目运算符系指与操作数相连的一边），其它运算符（包括大多数二目运算符和三目运算符“?:”两边均加一空格，“(”、“)”运算符在其内侧空一格，在作函数定义时还可据情况多空或不空格来对齐，但在函数实现时可以不用。“,”运算符只在其后空一格，需对齐时也可不空或多空格，不论是否有括号，对语句行后加的注释应用适当空格与语句隔开并尽可能对齐。

### （3）对齐

原则上关系密切的行应对齐，对齐包括类型、修饰、名称、参数等各部分对齐。另每一行的长度不应超过屏幕太多，必要时适当换行，换行时尽可能在“,”处或运算符处，换行后最好以运算符打头，并且以下各行均以该语句首行缩进，但该语句仍以首行的缩进为准，即如其下一行为“{”应与首行对齐。
变量定义最好通过添加空格形成对齐，同一类型的变量最好放在一起。如下例所示：
int    Value;
int    Result;
int    Length;
long   Size;
long   BufSize;
char   pBuf;
类名  pOutputBuf;
方法名  pPath;

### （4）空行

程序文件结构各部分之间空两行，若不必要也可只空一行，各函数实现之间一般空两行，由于BCB会自动产生一行“//------”做分隔，另因每个函数还要有函数说明注释，故通常只需空一行或不空，但对于没有函数说明的情况至少应再空一行。对自己写的函数，建议也加上“//------”做分隔。函数内部数据与代码之间应空至少一行，代码中适当处应以空行空开，建议在代码中出现变量声明时，在其前空一行。类中四个“p”之间至少空一行，在其中的数据与函数之间也应空行。

### （5）注释

对注释有以下三点要求：
**A.必须是有意义。**
**B.必须正确的描述了程序。**
**C.必须是最新的。**
注释必不可少，但也不应过多，以下是四种必要的注释：
A.标题、附加说明。
B.函数说明。对几乎每个函数都应有适当的说明，通常加在函数实现之前，在没有函数实现部分的情况下则加在函数原型前，其内容主要是函数的功能、目的、算法等说明，参数说明、返回值说明等，必要时还要有一些如特别的软硬件要求等说明。
C.在代码不明晰或不可移植处必须有一定的说明。
D.及少量的其它注释。
注释有块注释和行注释两种，分别是指：建议对A用块注释，D用行注释，B、C则视情况而定，但应统一，至少在一个单元中B类注释形式应统一。
举例如下：

------

函数名称：public List< MangoAttend > getAllAttendMessageByUserId(Integer id)
功能：通过用户id查询mango_attend表
设计目的：为了简便后续的业务开发
设计原理：使用mybatis提供的mapper接口
实现方法/过程：调用mangoAttendMapper的getAllAttendMessageByUserId方法
出入口参数：
id	int类型	用户id

返回值描述：

返回该用户在mango_attend表内的所有信息

设计修改日志：
  2020/12/15  第一次设计

------



### (6)代码长度

对于每一个函数建议尽可能控制其代码长度为53行左右，超过53行的代码要重新考虑将其拆分为两个或两个以上的函数。函数拆分规则应该一不破坏原有算法为基础，同时拆分出来的部分应该是可以重复利用的。对于在多个模块或者窗体中都要用到的重复性代码，完全可以将起独立成为一个具备公用性质的函数，放置于一个公用模块中(base.java)

### 3．符号名的命名（包括变量、函数、标号、模块名等）

变量名称:由（前缀+修饰语）构成：

service(业务基本实现接口)

serviceIplm(业务接口实现类)

mapper(与数据库交互接口)

Controller(实际处理请求类)

configuration(配置类)

application(配置文件)

（1）访问修饰符：

​	public	公共

​	private	私有

​	protected	有限

​	default	缺省


(注：对于与表有关的类直接用表名。)

### 4：输入输出

输入和输出方式和格式尽可能方便用户，避免因设计不当给使用带来麻烦。应根据不同用户的类型、特点和不同的要求来制定方案。格式力求简单，并应有完备的出错检查和出错恢复措施。
界面布局主要考虑各区域在屏幕的放置，使用户能以最快的速度找到操作对象、发现目标，屏幕的布局还要考虑界面的表现形式，使界面美观一致，协调合理。界面设计要求满足以下要求：
●界面上只包含必要的信息。
●界面上包含所有必要的信息。
●界面布局从左上角开始。
●制订格式标准，所有的屏幕设计都遵守这些标准，保持一致性。
●根据逻辑关系将相关的信息放在一起。
●屏幕设计要保持对称的平衡。
●避免过多使用前调信息。//例如OnEnter事件请尽量少用。
●区分标题和内容。
●提示信息要简洁。
●设计与用户知识和经验一致。
●按照使用顺序显示信息。
●遵照流行软件的事实标准。
●选择合理的显示方式。
●尽可能不让用户切换画面即可完成一次完整的操作。

