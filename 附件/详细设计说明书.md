[TOC]

# 12．1 引言

## 12．1．1 编写目的

在此编写本说明书以对本系统的各个模块进行详细说明，将项目细分成不同的功能模块，并对每个模块的进行具体设计，不仅明确了技术人员的编程任务，起到减少后续检查工作的作用，还使用户能够更清楚地理解本系统，从而更好地使用本系统。在以后的软件测试以及软件维护阶段也可以参考次说明书，以便于了解在概要设计过程中完成的各模块设计结构，或在修改时找出本阶段设计的不足或错误。

## 12．1．2 背景

本项目的名称是“汕大论坛”，是一个致力于给汕头大学学生提供生活服务, 学习交流平台的基于微信小程序的WEB端app,本项目采用用户机与服务器原理,客户端是基于微信小程序的,服务器采用Springboot框架开发,采用mysql数据库存储用户信息

## 12．1．3 定义

无

## 12．1．4 参考资料

无

# 12．2 程序系统的组织结构

![![img](https://res.wx.qq.com/op_res/ZLIc-BdWcu_ixroOT0sBEtk0UwpTewqS6ujxbC2QOpbKIVp_DzleM_C9I-9GPDDh)](https://i.loli.net/2019/12/03/jcUdNKJfBW7tr2s.png)





# 12．3 注册（SIGNIN）设计说明

## 12．3．1 程序描述

![img](https://res.wx.qq.com/op_res/ZLIc-BdWcu_ixroOT0sBEtk0UwpTewqS6ujxbC2QOpbKIVp_DzleM_C9I-9GPDDh)

本小程序的注册功能使用了微信开放平台的OAuth2.0认证机制,通过第三方平台的用户授权从而从微信的认证服务器取得用户的信息,从而完成一键注册的功能

## 12．3．2 功能

1. 该模块的功能是给每个用户分发一个账号，供用户登录用

2. 该模块的一个功能是通过微信的认证机制完成用户的一键注册

## 12．3．3 性能

1. 该模块会对用户输入的内容进行验证，避免软件受到攻击；

2. 会对用户密码的安全性提供校验，确保用户密码的安全性；

3. 通过使用OAuth2.0认证避免用户输入密码,通过后台存储的用户微信openid去进行用户身份绑定.

## 12．3．4 输入项

无,通过小程序内置微信登录接口直接一键注册登录

## 12．3．7 流程逻辑

![微信oauth认证流程](C:\Users\wade\Desktop\软件工程\软工项目汇报\附件\微信oauth认证流程.png)

## 12．3．8 接口

程序使用微信wx.login登录接口去后台请求微信服务器内存储的用户信息

## 12．3．9 存储分配

如果用户注册成功，那么将用户的账号等信息存入数据库的“用户表”中；如果用户注册失败，那么不存储任何信息。

## 12．3．10 注释设计

```
/**
*  函数名称：sign_in
*  函数功能：给用户提供注册接口
*  输入参数列表：（参数名列表）
*  返回值：（函数的返回值）
*/
```

## 12．3．11 限制条件

无

## 12．3．12 测试计划

1. 测试一：检测输入参数
   
   输入基本信息，内含非法字符，测试能否成功输入

3. 测试二：测试提交接口
   
   输入基本信息，点击提交按钮，测试是否能成功提交

## 12．3．13 尚未解决的问题

无

# 12．4 登录（LOGIN）设计说明

## 12．4．1 程序描述

该模块主要是为了区分用户身份，因本系统分为用户和系统管理员，不同角色进入之后会出现不同的推送信息和不同的功能权限，也更好地追踪用户的操作。

## 12．4．2 功能

该模块的功能包括了对用户账户的验证，还包括了对不同用户的角色区分，以达到更好的用户使用感。

## 12．4．3 性能

该模块会对用户的信息进行验证再查询数据库，以免造成不必要的数据库查询导致数据处理速度下降以及服务器的负担过重。

## 12．4．4 输入项
无

## 12.	4.	5页面
无页面

如果登录失败，输出失败原因。

如果登录成功输出成功标记，并返回上一个页面

如果登录失败，输出失败原因。

## 12．4．6 算法

逻辑：用户输入账号密码之后，先检验参数是否合法，避免数据库遭到攻击。如果参数合法，那么查询数据库中的用户表，如果找到对应用户，那么登录成功；如果没有找不到对应的用户，那么给用户返回“用户名或密码不正确”等字样，用户重新输入。

## 12．4．7 流程逻辑

![登录流程](C:\Users\wade\Desktop\软件工程\软工项目汇报\附件\登录流程.png)

## 12．4．8 接口

接口由后台提供，输入信息之后，调用登录接口，信息经过检验之后在数据库中匹配的对应的信息。

## 12．4．9 存储分配

用户登录成功之后，给用户分配一个登录态，并将用户的登录态和用户id一起存到数据库中

## 12．4．10 注释设计

```
/**
* 函数名称：login
* 函数功能：用于用户登录
* 被访问的表：（数据库中存储用户个人信息的表名）
* 输入参数列表：（参数名列表）
* 返回值：（函数的返回值）
*/
```

## 12．4．11 限制条件

用户应该已经注册过，拥有自己的账号

## 12．4．12 测试计划

1. 测试一：测试输入参数
   
   输入含有非法字符的参数，测试是否有提示信息并且不能成功登录

2. 测试二：测试用户登录接口
   
   输入一个已经注册过的用户信息，测试是否能够成功登录
   
   输入一个不存在的用户，测试是否登录失败
   
   输入一个已经注册的用户，但是密码是错的，测试是否登录失败

## 12．4．13 尚未解决的问题

无

# 12．5 搜索（SEARCH）设计说明

## 12．5．1 程序描述

该模块用来提高用户查找信息的速度，有效提高查询效率

## 12．5．2 功能

该模块用过用户输入关键词，用关键词匹配对应的信息，使用户能快速找到想要的信息

## 12．5．3 性能

支持模糊搜索，检索速度快

## 12．5．4 输入项

输入关键词，例如：语文

## 12．5．5 输出项

输出所有匹配项，按照信息的热度排序

## 12．5．6 算法

搜索：搜索算法先使用TexTRank算法提取关键词，将词语分割之后，把每个词语当做一个节点，再由词语之间的关系确定节点的链，再用公式算出权值最大的值，将其作为关键词。

逻辑：用户输入关键词之后，先检验参数是否合法，参数合法的话再用这个参数去匹配提取出来的关键词，如果匹配得到，返回匹配到的所有记录。

## 12．5．7 流程逻辑

![avatar](https://i.loli.net/2019/12/03/FrLdyqG37i8sjxI.png)

## 12．5．8 接口

接口由后台提供，输入关键词后，点击搜索将信息提交给后台，后台再到数据库去匹配，返回匹配的内容

## 12．5．9 存储分配

无需存储

## 12．5．10 注释设计

```
/**
* 函数名称：search
* 函数功能：用户给用户提供查询信息的接口
* 被访问的表：（数据库中存储用户发表过的信息的表名）
* 输入参数列表：（参数名列表）
* 返回值：返回相匹配的信息列表
*/
```

## 12．5．11 限制条件

用户必须先登录

## 12．5．12 测试计划

1. 测试一：测试输入参数
   
   输入一个含有非法字符的字符串，测试是否查询失败

2. 测试二：测试接口性能
   
   输入一个合法字符串，测试是否返回了相关信息列表

## 12．5．13 尚未解决的问题

无

# 12．6 发布信息（PUBLISH）设计说明

## 12．6．1 程序描述

该模块用来让用户发布自己的文章，以供其他人在浏览页面或者搜索的时候看到

## 12．6．2 功能

用户可以发布自己的帖子,同时可以被用户评论

## 12．6．3 性能

性能优良，发布成功后的消息会马上存入数据库，并显示在页面上，使消息得到更加及时的关注

## 12．6．4 输入项

输入文章相关信息，例如：

文章内容:

图片信息:

是否匿名发布:

文章类型:



## 12.6.5 输出项

帖子信息的标志，并在页面上显示发布的信息；如果操作失败，返回失败的原因

如果操作成功，输出发布成功的标志，并在页面上显示发布的信息；如果操作失败，返回失败的原因

## 12．6．6 算法

逻辑：用户输入发布的相关内容之后，前端先检验重要信息是否已填写，再发到后台。后台要检验参数的合法性，再将数据插入到数据库对应的表中，插入完成后要返回用户发布的信息

## 12．6．7 流程逻辑

![avatar](https://i.loli.net/2019/12/03/JCorOncKdwmA25X.png)

## 12．6．8 接口

接口由后台提供，用户输入信息之后，将信息交给后台处理，成功的话再进行后续操作

## 12．6．9 存储分配

将输入成功的信息存入数据库的信息表中，表中的字段分别为：帖子信息,帖子内容,帖子类型,帖子图片,是否匿名

## 12．6．10 注释设计

注释应该在函数名上方

```
/**
* 函数名称：publish
* 函数功能：用于用户发布信息
* 被访问的表：（数据库中存储用户个人信息的表名）
* 被修改的表：（数据库中插入该信息的表名）
* 输入参数列表：（参数名列表）
* 返回值：（函数的返回值）
*/
```

## 12．6．11 限制条件

用户必须先登录，否则无法找到对应的用户账号

## 12．6．12 测试计划

1. 测试一：测试输入参数
   
   输入含有非法字符的字符串，测试是否输入错误

2. 测试二：测试发布接口
   
   输入合法信息，测试是否能够发布成功，且发布人员是用户本人，以及查看数据库是否有相应记录

## 12．6．13 尚未解决的问题

无

# 12．7 修改信息（ALTER）设计说明

## 12．7．1 程序描述

有时候用户会发现自己输入的信息有误，该模块用来修改已经发布过的信息，以达到更好的用户体验

## 12．7．2 功能

对自己已经发布过的信息可以点击编辑按钮修改，修改完之后再次发布

## 12．7．3 性能

性能良好，能够及时更新信息并且再次发布

## 12．7．4 输入项

删除要修改的那一项原本的信息，再次输入，例如：

文章内容：……版本二

## 12．7．5 输出项

如果修改成功，输出修改成功的标志，并返回上一个页面；如果修改失败，那么输出失败的原因

## 12．7．6 算法

用户先修改要修改的选项，再把数据提交给后台，后台通过检验用户的登录态和信息的编号来确定该信息是否是用户发送的，如果不是，禁止用户修改；如果是用户本人发布的，那么在数据库中更新对应的记录

## 12．7．7 流程逻辑

![avatar](https://i.loli.net/2019/12/03/HFb2rgqvxeuRGtN.png)

## 12．7．8 接口

接口由后台提供，将修改信息输入并提交之后，调用接口，把数据传入后台，后台再更新对应的记录

## 12．7．9 存储分配

在数据库已有的信息表的基础上更新一条记录中的一个字段的信息

## 12．7．10 注释设计

注释应该在函数名上方

```
/**
* 函数名称：alter
* 函数功能：用于用户修改自己发布信息
* 被访问的表：（数据库中存储用户个人信息的表名）
* 被修改的表：（数据库中修改该信息的表名）
* 输入参数列表：（参数名列表）
* 返回值：（函数的返回值）
*/
```

## 12．7．11 限制条件

1. 用户必须已经登录

2. 修改的信息必须是用户本人发表过的

## 12．7．12 测试计划

1. 测试一：测试输入参数
   
   输入含有非法字符的字符串，测试是否输入错误

2. 测试二：测试修改信息接口
   
   输入正常信息，测试是否可以修改成功，查看数据库中相应的记录是否被修改

3. 测试三：测试修改项
   
   逐项修改信息，测试是否可以选择性修改

## 12．7．13 尚未解决的问题

无



# 12．8 删除信息（DELETE）设计说明

## 12．8．1 程序描述

该模块可以删除用户不想要或者已经解决的消息

## 12．8．2 功能

用户可以删除不想发布或者已经与另一需求方达成交易的消息，以免受到他人打扰

## 12．8．3 性能

性能良好，能准确删除用户指定的信息

## 12．8．4 输入项

无输入

## 12．8．5 输出项

如果删除成功，那么在页面上将该信息删除；如果删除失败，那么返回失败原因

## 12．8．6 算法

逻辑：用户点一个消息删除，先判断用户是否为消息的发送方，如果不是，不予以删除；如果是，在数据库中找到相应记录并删除，此时前端再次请求数据，以得到最新的数据。

## 12．8．7 流程逻辑

![avatar](https://i.loli.net/2019/12/03/vDnVzlPetdYOTAh.png)

## 12．8．8 接口

用户点击删除按钮之后，将对应信息的编号发给后台，后台再进行相应处理

## 12．8．9 存储分配

删除成功则将信息表上对应的记录删除

## 12．8．10 注释设计

注释应该在函数名上方

```
/**
* 函数名称：delete
* 函数功能：用于用户删除发布过的信息
* 被访问的表：（数据库中存储用户个人信息的表名）
* 被修改的表：（数据库中删除该信息的表名）
* 输入参数列表：（参数名列表）
* 返回值：（函数的返回值）
*/
```

## 12．8．11 限制条件

1. 用户已登录

2. 被删除的信息存在

3. 被删除的信息是用户本人发的

## 12．8．12 测试计划

1. 测试一：测试删除本人发布的信息
   
   点击自己发布的信息，测试能否成功删除，查看数据库中相应的记录是否已被删除

2. 测试二：测试删除他人发布的信息
   
   点击他人发布的信息，测试能否被删除

## 12．8．13 尚未解决的问题

无



# 12．9 查看信息（DETAIL）设计说明

## 12．9．1 程序描述

该模块用来给用户了解信息详情，让用户能够对比优缺点，考虑得更充分，充分保障用户的知权和选择权

## 12．9．2 功能

用户点击一个信息，可以跳转到详情页面查看详细信息，包括消息本身和发布主体的信息，让信息透明化

## 12．9．3 性能

用户查看信息能够准确被定位，信息从数据库提取出来，数据库的存储和查询数据错误率低

## 12．9．4 输入项

无输入

## 12．9．5 输出项

输出指定信息的详细信息，包括信息发布方的经验、学历、期待工资、期待时间等

## 12．9．6 算法

用户点击指定信息之后，取到信息的id，将id作为参数传入后台，在数据库中查询相应的记录并返回

## 12．9．7 流程逻辑

![avatar](https://i.loli.net/2019/12/03/L91jnHMudGvkixc.png)

## 12．9．8 接口

接口由后台提供，用户点击特定信息，获取信息的编号，再调用接口将该编号发给后台，后台查询数据库

## 12．9．9 存储分配

查询数据库中已有的信息表

## 12．9．10 注释设计

注释应该在函数名上方

```
/**
* 函数名称：detail
* 函数功能：用于查看信息详情
* 被访问的表：（数据库中存储该信息的表名）
* 输入参数列表：（参数名列表）
* 返回值：（函数的返回值）
*/
```

## 12．9．11 限制条件

1. 用户已登录

2. 查询的消息存在

## 12．9．12 测试计划

测试一：测试能否查看正确消息

    点击消息列表中的一项，测试能否查看到正确消息

## 12．9．13 尚未解决的问题

无
